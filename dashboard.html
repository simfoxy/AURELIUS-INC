<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>First Union Inc. | Personal Banking Dashboard</title>
  <link rel="stylesheet" href="dashboard.css">
</head>
<body>
  <div class="navbar">
    <div class="navbar-left">
      <div style="display: inline-block; font-family: 'Georgia', serif; color: #003366;">
  <div style="display: flex; align-items: center; gap: 10px;">
    <div style="width: 40px; height: 40px; background: #003366; border-radius: 50%; 
                display: flex; align-items: center; justify-content: center;">
      <div style="width: 30px; height: 30px; border: 2px solid white; border-radius: 50%;"></div>
    </div>
    <div>
      <div style="font-size: 22px; font-weight: bold; letter-spacing: 1px;">AURELIUS</div>
      <div style="font-size: 12px; letter-spacing: 3px; margin-top: -3px;">INC</div>
    </div>
  </div>
</div>
     
    </div>
    <div class="navbar-right">
      <span class="user-status">Connected</span>
      <div class="user-profile" id="profileBtn">
        <div class="user-avatar user-avatar-initials">A</div>
        <span class="user-name">STEVE LANGEN</span>
        <span class="dropdown-arrow">&#9662;</span>
      </div>
      <!-- Dropdown Menu -->
      <div class="profile-dropdown" id="profileDropdown">
        <div class="profile-header">
          <div class="user-avatar user-avatar-initials">LS</div>
          <div>
            <div class="profile-name">STEVE LANGEN</div>
            <div class="profile-id">4386294774</div>
          </div>
        </div>
        <div class="profile-account">
          <div class="profile-account-label">CHECKING ACCOUNT</div>
          <div class="profile-account-balance"><span id="profileBalance"></span> <span class="currency">USD</span></div>
          <div class="profile-account-local">Local <span id="profileBalanceLocal"></span> USD</div>
          <a href="transfer.html" class="profile-link">Transfer Funds <span class="profile-link-icon">üí≥</span></a>
        </div>
        <ul class="profile-menu">
          <li><span class="profile-menu-icon">üë§</span> View Profile</li>
          <li><span class="profile-menu-icon">‚öôÔ∏è</span> Account Setting</li>
          <li><span class="profile-menu-icon">üîí</span> Reset Password</li>
          <li><span class="profile-menu-icon">üïí</span> Login Activity</li>
          <li><span class="profile-menu-icon">üåô</span> Disable Dark mode</li>
          <li id="signOutBtn"><span class="profile-menu-icon">üö™</span> Sign out</li>
        </ul>
      </div>
    </div>
  </div>
  <div class="container">
    <aside class="sidebar">
      <div class="balance-section">
        <div class="balance-label">AVAILABLE BALANCE</div>
        <div class="balance-amount"><span id="mainBalance"></span> <span class="currency">USD</span></div>
        <div class="balance-amount-small"><span id="mainBalanceSmall"></span> USD</div>
        <div class="income-debits">
          <span class="income">Income <span class="green">28.57%</span></span>
          <span class="debits">Debits <span class="red">71.43%</span></span>
        </div>
        <div class="balance-actions">
          <button class="btn transfer">TRANSFER</button>
          <button class="btn paybills">PAY BILLS</button>
        </div>
      </div>
      <nav class="menu">
        <ul>
          <li class="active"><span class="menu-icon">&#128200;</span> Dashboard</li>
          <li><span class="menu-icon">&#128100;</span> My Account</li>
          <li><span class="menu-icon">&#128179;</span> Account summary</li>
          <li class="send-money-menu"><a href="transfer.html"><span class="menu-icon">&#128176;</span> Send Money</a></li>
          <li><span class="menu-icon">&#127760;</span> Cross-border Transfer</li>
          <li><span class="menu-icon">&#128179;</span> Deposit Check</li>
          <li><span class="menu-icon">&#128179;</span> Pay Bills</li>
          <li><span class="menu-icon">&#128179;</span> Virtual Cards</li>
        </ul>
      </nav>
    </aside>
    <main class="dashboard">
      <div class="dashboard-header">
        <h2>Good afternoon STEVE LANGEN</h2>
        <p>At a glance summary of your account!</p>
        <div class="dashboard-actions">
          <button class="btn deposit">Deposit</button>
          <button class="btn transfer-fund" disabled>Transfer Fund</button>
        </div>
      </div>
      <div class="overview-section">
        <div class="overview-card">
          <img src="profile.jpg" alt="Profile" class="profile-pic">
          <div class="overview-info">
            <div class="last-login">Last Login<br><span id="lastLoginTime"></span></div>
            <div class="available-balance-label">Available balance</div>
            <div class="available-balance-value">USD <span id="overviewBalance"></span></div>
            <div class="overview-name">STEVE LANGEN</div>
            <div class="ip-address">Your IP address <span class="flag">üá∫üá∏</span> <span class="ip" id="userIp">Detecting...</span></div>
          </div>
        </div>
        <div class="account-summary">
          <div class="checking-account">
            <div class="label">Checking Account</div>
            <div class="account-number">******94774</div>
            <div class="account-balance"><span id="summaryBalance"></span> USD</div>
          </div>
          <div class="loans-credit">
            <div class="loan">
              <div class="label">Business Support Loan</div>
              <div class="amount">+4,000 USD</div>
            </div>
            <div class="fico">
              <div class="label">FICO Credit Score</div>
              <div class="score">750 <span class="dot"></span></div>
            </div>
          </div>
        </div>
      </div>
      <div class="transactions-section">
    <h3>Recent Transaction Activities</h3>
    <div class="transaction-list" id="transactionList">
      <!-- New transactions added here -->
      <div class="transaction debit">
        <div class="code">TRF/7HJK89L2</div>
        <div class="date">03 Aug 2025, 2:15 pm</div>
        <div class="desc">Transfer to TechGlobal Solutions (Acct: 7384920184)</div>
        <div class="amount">-$50,000 USD</div>
        <div class="status completed">Completed</div>
        <a href="#" class="view-details">View Details</a>
      </div>
      
      <div class="transaction debit">
        <div class="code">TRF/5MNB34V9</div>
        <div class="date">04 Aug 2025, 10:30 am</div>
        <div class="desc">Transfer to Oceanic Imports Ltd (Acct: 5628394712)</div>
        <div class="amount">-$50,000 USD</div>
        <div class="status completed">Completed</div>
        <a href="#" class="view-details">View Details</a>
      </div>
      
      <div class="transaction debit">
        <div class="code">TRF/9KLP21R6</div>
        <div class="date">05 Aug 2025, 4:45 pm</div>
        <div class="desc">Transfer to Summit Financial Group (Acct: 8947561230)</div>
        <div class="amount">-$50,000 USD</div>
        <div class="status completed">Completed</div>
        <a href="#" class="view-details">View Details</a>
      </div>
    </div>
  </div>
      <div class="balance-flow-section">
        <h3>Balance Flow</h3>
        <div class="balance-flow-chart">
          <div class="chart-pie"></div>
          <div class="pie-legend" style="display:flex;justify-content:center;gap:18px;margin-top:10px;">
  <span style="display:flex;align-items:center;">
    <span style="width:14px;height:14px;background:#4caf50;display:inline-block;border-radius:50%;margin-right:6px;"></span>
    Income
  </span>
  <span style="display:flex;align-items:center;">
    <span style="width:14px;height:14px;background:#e74c3c;display:inline-block;border-radius:50%;margin-right:6px;"></span>
    Debits
  </span>
</div>
        </div>
      </div>
    </main>
  </div>
  <script src="dashboard.js"></script>
  <script>
    // Render transactions from localStorage
       function renderTransactions() {
      const container = document.getElementById('transactionList');
      let transactions = JSON.parse(localStorage.getItem('transactions') || '[]');
      let html = '';

      // New transactions for August
      const newTransactions = [
        {
          code: 'TRF/7HJK89L2',
          date: '03 Aug 2025, 2:15 pm',
          desc: 'Transfer to Zakat, Tax and Customs Authority (Acct: 53383308915)',
          amount: '-$50,000 USD',
          type: 'debit',
          status: 'Completed'
        },
        {
          code: 'TRF/5MNB34V9',
          date: '04 Aug 2025, 10:30 am',
          desc: 'Transfer to Zakat, Tax and Customs Authority (Acct: 53383308915)',
          amount: '-$50,000 USD',
          type: 'debit',
          status: 'Completed'
        },
        {
          code: 'TRF/9KLP21R6',
          date: '05 Aug 2025, 4:45 pm',
          desc: 'Transfer to Zakat, Tax and Customs Authority (Acct: 53383308915)',
          amount: '-$50,000 USD',
          type: 'debit',
          status: 'Completed'
        }
      ];

      
      // Combine all transactions (new first, then existing, then defaults)
      const allTransactions = [...newTransactions, ...transactions, ...defaultTxns];

      allTransactions.forEach(txn => {
        html += `
          <div class="transaction ${txn.type}">
            <div class="code">${txn.code}</div>
            <div class="date">${txn.date}</div>
            <div class="desc">${txn.desc}</div>
            <div class="amount">${txn.amount}</div>
            ${txn.status ? `<div class="status completed">${txn.status}</div>` : ''}
            <a href="#" class="view-details">View Details</a>
          </div>
        `;
      });

      container.innerHTML = html;
    }

    // Updated renderBalance function to account for the new transactions
    function renderBalance() {
      let balance = parseFloat(localStorage.getItem('balance') || '20635944');
      // Deduct $150,000 for the three new transactions
      balance -= 150000;
      
      function format(num) {
        return num.toLocaleString('en-US', {maximumFractionDigits: 0});
      }
      
      // Update all balance displays
      if(document.getElementById('mainBalance')) document.getElementById('mainBalance').textContent = format(balance);
      if(document.getElementById('mainBalanceSmall')) document.getElementById('mainBalanceSmall').textContent = format(balance);
      if(document.getElementById('profileBalance')) document.getElementById('profileBalance').textContent = format(balance);
      if(document.getElementById('profileBalanceLocal')) document.getElementById('profileBalanceLocal').textContent = format(balance);
      if(document.getElementById('overviewBalance')) document.getElementById('overviewBalance').textContent = format(balance);
      if(document.getElementById('summaryBalance')) document.getElementById('summaryBalance').textContent = format(balance);
      
      // Store the updated balance
      localStorage.setItem('balance', balance);
    }

    // Render balance from localStorage
    function renderBalance() {
      let balance = parseFloat(localStorage.getItem('balance') || '20635944');
      function format(num) {
        return num.toLocaleString('en-US', {maximumFractionDigits: 0});
      }
      // Update all balance displays
      if(document.getElementById('mainBalance')) document.getElementById('mainBalance').textContent = format(balance);
      if(document.getElementById('mainBalanceSmall')) document.getElementById('mainBalanceSmall').textContent = format(balance);
      if(document.getElementById('profileBalance')) document.getElementById('profileBalance').textContent = format(balance);
      if(document.getElementById('profileBalanceLocal')) document.getElementById('profileBalanceLocal').textContent = format(balance);
      if(document.getElementById('overviewBalance')) document.getElementById('overviewBalance').textContent = format(balance);
      if(document.getElementById('summaryBalance')) document.getElementById('summaryBalance').textContent = format(balance);
    }

    renderTransactions();
    renderBalance();

    function updateLastLogin() {
    const now = new Date();
    const options = { 
      year: 'numeric', 
      month: 'short', 
      day: 'numeric', 
      hour: '2-digit', 
      minute: '2-digit',
      hour12: true 
    };
    document.getElementById('lastLoginTime').textContent = now.toLocaleDateString('en-US', options);
    
    // Store in localStorage to remember between sessions
    localStorage.setItem('lastLogin', now.toString());
  }

  // Get IP address using a free API
  async function getUserIP() {
    try {
      // First try a reliable API
      const response = await fetch('https://api.ipify.org?format=json');
      const data = await response.json();
      return data.ip;
    } catch (error) {
      console.error("Error getting IP:", error);
      try {
        // Fallback API
        const fallback = await fetch('https://ipapi.co/json/');
        const data = await fallback.json();
        return data.ip;
      } catch (e) {
        console.error("Fallback IP API failed:", e);
        return "93.182.105.186"; // Default fallback
      }
    }
  }

  // Update IP display and flag
  async function updateIPDisplay() {
    const ipElement = document.getElementById('userIp');
    const ip = await getUserIP();
    ipElement.textContent = ip;
    
    // Get location info (country) for flag - this is approximate
    try {
      const response = await fetch(`https://ipapi.co/${ip}/country/`);
      const countryCode = await response.text();
      const flag = getFlagEmoji(countryCode);
      document.querySelector('.ip-address .flag').textContent = flag;
    } catch (e) {
      console.error("Couldn't get country:", e);
    }
    
  }
  
  </script>
  <!-- Profile View Section -->
<div class="profile-view" id="profileView" style="display: none;">
  <div class="profile-view-header">
    <h3>Personal Details</h3>
    <span class="close-profile" id="closeProfile">&times;</span>
  </div>
  <div class="profile-details">
    <div class="detail-row">
      <span class="detail-label">Full Name:</span>
      <span class="detail-value">Steve Langen</span>
    </div>
    <div class="detail-row">
      <span class="detail-label">Contact Info:</span>
      <span class="detail-value">+1 (732) 595-3304 | stevelangen6@gmail.com</span>
    </div>
    <div class="detail-row">
      <span class="detail-label">Date of Birth:</span>
      <span class="detail-value">September 21, 1963</span>
    </div>
    <div class="detail-row">
      <span class="detail-label">SSN:</span>
      <span class="detail-value">543-******</span>
    </div>
  </div>
</div>
<!-- Account Summary Section -->
<div class="account-summary-view" id="accountSummaryView" style="display: none;">
  <div class="summary-view-header">
    <h3>Account Summary</h3>
    <span class="close-summary" id="closeSummary">&times;</span>
  </div>
  
  <div class="summary-content">
    <div class="summary-section">
      <h4>Primary Accounts</h4>
      <div class="account-card">
        <div class="account-header">
          <span class="account-type">CHECKING ACCOUNT</span>
          <span class="account-number">******94774</span>
        </div>
        <div class="account-details">
          <div class="account-balance">
            <span class="balance-label">Available Balance:</span>
            <span class="balance-amount">$20,635,944.00 USD</span>
          </div>
          <div class="account-status">
            <span class="status-active">‚óè Active</span>
            <span class="account-opened">Opened: 03/15/2018</span>
          </div>
        </div>
      </div>
      
      <div class="account-card">
        <div class="account-header">
          <span class="account-type">SAVINGS ACCOUNT</span>
          <span class="account-number">******32891</span>
        </div>
        <div class="account-details">
          <div class="account-balance">
            <span class="balance-label">Available Balance:</span>
            <span class="balance-amount">$1,250,000.00 USD</span>
          </div>
          <div class="account-status">
            <span class="status-active">‚óè Active</span>
            <span class="account-opened">Opened: 03/15/2018</span>
          </div>
        </div>
      </div>
    </div>
    
    <div class="summary-section">
      <h4>Credit Products</h4>
      <div class="account-card">
        <div class="account-header">
          <span class="account-type">BUSINESS SUPPORT LOAN</span>
          <span class="account-number">******L-2284</span>
        </div>
        <div class="account-details">
          <div class="account-balance">
            <span class="balance-label">Current Balance:</span>
            <span class="balance-amount">$4,000.00 USD</span>
          </div>
          <div class="account-status">
            <span class="status-active">‚óè Active</span>
            <span class="account-opened">Maturity: 06/15/2026</span>
          </div>
        </div>
      </div>
    </div>
    
    <div class="summary-section">
      <h4>Credit Information</h4>
      <div class="credit-info">
        <div class="credit-score">
          <span class="score-label">FICO¬Æ Score:</span>
          <span class="score-value">750</span>
          <span class="score-range">(300-850)</span>
        </div>
        <div class="credit-utilization">
          <span class="util-label">Credit Utilization:</span>
          <span class="util-value">12%</span>
          <div class="util-bar">
            <div class="util-progress" style="width: 12%;"></div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="summary-footer">
      <p>Last updated: <span id="summaryUpdateTime"></span></p>
      <button class="btn print-summary">Print Summary</button>
      <button class="btn download-summary">Download as PDF</button>
    </div>
  </div>
</div>
<!-- Virtual Cards Section -->
<div class="virtual-cards-view" id="virtualCardsView" style="display: none;">
  <div class="cards-view-header">
    <h3>Virtual Private Wealth Cards</h3>
    <span class="close-cards" id="closeCards">&times;</span>
  </div>
  
  <div class="cards-container">
    <div class="virtual-card" id="card1">
      <div class="card-front">
        <div class="card-logo">
          <img src="https://i.imgur.com/8Km9tLL.png" alt="First Union Logo" width="40">
          <span>Private Wealth</span>
        </div>
        <div class="card-number">‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ 4386</div>
        <div class="card-footer">
          <div class="card-expiry">EXP 12/28</div>
          <div class="card-type">VIRTUAL</div>
        </div>
      </div>
    </div>
    
    <div class="virtual-card" id="card2">
      <div class="card-front">
        <div class="card-logo">
          <img src="https://i.imgur.com/8Km9tLL.png" alt="First Union Logo" width="40">
          <span>Private Wealth</span>
        </div>
        <div class="card-number">‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ 5921</div>
        <div class="card-footer">
          <div class="card-expiry">EXP 09/27</div>
          <div class="card-type">VIRTUAL</div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- PIN Entry Modal -->
  <div class="pin-modal" id="pinModal">
    <div class="pin-header">
      <h4>Enter PIN to View Card Details</h4>
      <span class="pin-error" id="pinError"></span>
    </div>
    <div class="pin-input">
      <input type="password" maxlength="4" id="pinEntry" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
    </div>
    <div class="pin-actions">
      <button class="btn pin-cancel" id="pinCancel">Cancel</button>
      <button class="btn pin-submit" id="pinSubmit">Submit</button>
    </div>
  </div>
  
  <!-- Card Details Modal -->
  <div class="card-details-modal" id="cardDetailsModal">
    <div class="details-header">
      <h4>Card Details</h4>
      <span class="close-details" id="closeDetails">&times;</span>
    </div>
    <div class="card-details" id="cardDetailsContent">
      <!-- Details will be inserted here -->
    </div>
    <div class="card-actions">
      <button class="btn card-action">Freeze Card</button>
      <button class="btn card-action">Report Lost</button>
      <button class="btn card-action">View Transactions</button>
    </div>
  </div>
</div>
<div class="deposit-modal" id="depositModal" style="display:none;">
  <div class="modal-header">
    <h3>Make a Deposit</h3>
    <span class="close-deposit">&times;</span>
  </div>
  
  <div class="deposit-tabs">
    <button class="tab-btn active" data-tab="electronic">Electronic Transfer</button>
    <button class="tab-btn" data-tab="check">Check Deposit</button>
    <button class="tab-btn" data-tab="mobile">Mobile Check</button>
  </div>
  
  <div class="tab-content active" id="electronic-tab">
    <div class="form-group">
      <label>From Account</label>
      <select>
        <option>External Bank Account</option>
        <option>First Union Savings (****3289)</option>
        <option>First Union Business (****4472)</option>
      </select>
    </div>
    
    <div class="form-group">
      <label>To Account</label>
      <select>
        <option selected>First Union Checking (****9477)</option>
        <option>First Union Savings (****3289)</option>
      </select>
    </div>
    
    <div class="form-group">
      <label>Amount ($USD)</label>
      <input type="text" placeholder="0.00" class="currency-input">
    </div>
    
    <button class="btn-submit">Transfer Funds</button>
  </div>
  
  <div class="tab-content" id="check-tab">
    <div class="check-deposit-instructions">
      <p>Visit any First Union branch or ATM to deposit your check in person.</p>
      <div class="branch-finder">
        <h4>Branch Locator</h4>
        <input type="text" placeholder="Enter ZIP Code">
        <button class="btn-find">Find Branches</button>
      </div>
    </div>
  </div>
  
  <div class="tab-content" id="mobile-tab">
    <div class="mobile-check-instructions">
      <p>Use our mobile app to deposit checks securely:</p>
      <ol>
        <li>Sign the back of your check</li>
        <li>Write "For Mobile Deposit Only at First Union"</li>
        <li>Open our mobile app and select Mobile Deposit</li>
        <li>Take photos of the front and back</li>
      </ol>
      <div class="app-badges">
        <img src="https://upload.wikimedia.org/wikipedia/commons/3/3c/Download_on_the_App_Store_Badge.svg" alt="App Store" width="120">
        <img src="https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg" alt="Google Play" width="135">
      </div>
    </div>
  </div>
  
  <div class="deposit-disclaimer">
    <p>Funds availability subject to verification. Mobile deposit limits: $5,000/day.</p>
  </div>
</div>
<!-- Transaction Details Modal -->
<div class="transaction-details-modal" id="transactionDetailsModal" style="display: none;">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Transaction Details</h3>
      <span class="close-modal" id="closeTransactionDetails">&times;</span>
    </div>
    <div class="modal-body" id="transactionDetailsContent">
      <!-- Details will be inserted here -->
    </div>
  </div>
</div>
</body>
</html>